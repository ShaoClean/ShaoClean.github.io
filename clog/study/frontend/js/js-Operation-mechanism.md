---
icon: javascript
date: 2022-09-24
star: 10
category:
  - 前端
  - JS
tag:
  - 运行机制
  - 学习笔记
---

# JS运行机制

## 运行环境

**支持环境：**

- 浏览器
- webview
- WebApp（Hybrede混合App）
- NodeJS

**栈内存：**

浏览器能够运行JS代码，是因为提供了代码运行的环境：栈内存（Stack）

- 栈内存也是从计算机的内存分配出来的一块内存
- `执行环境栈（栈内存）`，Execution Context Stack（ECStask）提供代码执行的环境

:::tip

栈内存和堆内存的区别：

二者都是内存

栈用于执行代码，存储基本数据类型（原始值类型）

堆用于存储对象、函数

二者是独立的，不相互包含的内存空间

:::

执行代码的过程中，为了区分是在哪个环境下执行（全局/函数/块），首先会产生一个执行上下文EC

- EC（G）全局上下文，全局代码在这里执行
- EC（X）某个函数的执行上下文

## 执行过程



**等号赋值的过程：**

- 1.创建值

  原始值类型的值，是直接存储在栈内存中的；对象数据类型值是需要单独开辟内存存储的（堆内存Heap）

- 2.声明变量（declare）

​		var/function/let/const/import

​		把声明的变量存储在当前所处上下文的变量对象中，例如：EC（G）

- 3.赋值操作

​		赋值操作，即定义（defined）数据，所以声明变量没有赋值叫做undefined

​		按照计算机的底层机制，赋值操作是指针的指向和关联



**创建对象数据类型（函数除外）过程：**

- 1.不能直接存储在栈中

​		开辟一个单独的内存（堆内存）。为了后期访问这个内存，都会赋予内存一个16进制的地址

- 2.把对象中的键值对依次存储到堆内存中
- 3.把内存的地址放置在栈中供变量引用