---
icon: nodeJS
date: 2023-07-25
category:
  - 后端
  - Node
tag:
  - 进程和线程
  - 学习笔记
---

# 进程和线程

## 进程

一个应用程序，总是通过操作系统启动的，当操作系统启动一个应用程序时，会给其分配一个进程。

一个进程拥有独立的、可伸缩的内存空间，原则上不受其他进程干扰。

进程之间是可以通信的，只要两个进程双方遵守一定的协议，比如ipc、http

**CPU在不同的进程之间切换执行**

虽然一个应用程序在启动的时候只有一个进程，但它在运行的时候，可以开启新的进程，进程之间仍然保持相对独立

如果一个进程是直接由操作系统开启，则它叫做主进程。如果一个进程B是由进程A开启，则A是B的父进程，B是A的子进程，子进程会继承父进程的一些信息，但仍然保持相对独立。

## 线程

操作系统启动一个进程（无论是主进程，还是子进程）都会自动为它分配一个线程，称之为主线程

程序一定在线程上运行（代码 ）

主线程在运行的过程中，可以创建多个线程，这些线程称之为子线程

当操作系统命令CPU去执行一个进程时，实际上，是在该进程的多个线程中切换执行

线程和进程很相似，他们都是独立运行，最大的区别在于：线程的内存空间没有隔离，共享进程的内存空间，线程之间的数据不用遵守任何协议，可以随意使用。

什么时候要使用线程？

使用线程的主要目的，是为了充分使用多核cpu。

最理想的线程效果：
1. 线程数等于cpu的核数
2. 线程用不阻塞
3. 一般处理cpu密集型操作（复杂运算），io密集型操作不适合使用线程，而适合使用异步。 
