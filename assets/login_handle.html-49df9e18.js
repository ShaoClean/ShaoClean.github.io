const n=JSON.parse('{"key":"v-3cc55630","path":"/demo/login_handle.html","title":"session登陆校验处理函数","lang":"zh-CN","frontmatter":{"icon":"eye","date":"2022-10-09T00:00:00.000Z","article":true,"category":["demo"],"tag":["login_handle"],"description":"session登陆校验处理函数 //白名单，跳过session校验 const whiteListUrl = [ \\"/login\\" ] //每次请求前校验session是否正确 exports.checkSession = (req,res,next) =&gt;{ if(whiteListUrl.indexOf(req.originalUrl) &gt; -1){ next() }else{ console.log(\\"request info:\\",req.originalUrl,req.session.loginStatus) if(req.session.loginStatus === \\"success\\"){ next() } else { res.send({ code:0, info:\\"error session!\\", }) } } }","head":[["meta",{"property":"og:url","content":"https://doc.shaoclean.top/demo/login_handle.html"}],["meta",{"property":"og:site_name","content":"clog"}],["meta",{"property":"og:title","content":"session登陆校验处理函数"}],["meta",{"property":"og:description","content":"session登陆校验处理函数 //白名单，跳过session校验 const whiteListUrl = [ \\"/login\\" ] //每次请求前校验session是否正确 exports.checkSession = (req,res,next) =&gt;{ if(whiteListUrl.indexOf(req.originalUrl) &gt; -1){ next() }else{ console.log(\\"request info:\\",req.originalUrl,req.session.loginStatus) if(req.session.loginStatus === \\"success\\"){ next() } else { res.send({ code:0, info:\\"error session!\\", }) } } }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-12-10T09:16:51.000Z"}],["meta",{"property":"article:tag","content":"login_handle"}],["meta",{"property":"article:published_time","content":"2022-10-09T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-12-10T09:16:51.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"session登陆校验处理函数\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-10-09T00:00:00.000Z\\",\\"dateModified\\":\\"2022-12-10T09:16:51.000Z\\",\\"author\\":[]}"]]},"headers":[],"git":{"createdTime":1665316848000,"updatedTime":1670663811000,"contributors":[{"name":"clean","email":"1518136109@qq.com","commits":3}]},"readingTime":{"minutes":0.23,"words":69},"filePathRelative":"demo/login_handle.md","localizedDate":"2022年10月9日","excerpt":"<h1> session登陆校验处理函数</h1>\\n<div class=\\"language-javascript line-numbers-mode\\" data-ext=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token comment\\">//白名单，跳过session校验</span>\\n<span class=\\"token keyword\\">const</span> whiteListUrl <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span>\\n    <span class=\\"token string\\">\\"/login\\"</span>\\n<span class=\\"token punctuation\\">]</span>\\n<span class=\\"token comment\\">//每次请求前校验session是否正确</span>\\nexports<span class=\\"token punctuation\\">.</span><span class=\\"token function-variable function\\">checkSession</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">req<span class=\\"token punctuation\\">,</span>res<span class=\\"token punctuation\\">,</span>next</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span><span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">if</span><span class=\\"token punctuation\\">(</span>whiteListUrl<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">indexOf</span><span class=\\"token punctuation\\">(</span>req<span class=\\"token punctuation\\">.</span>originalUrl<span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">&gt;</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token keyword\\">else</span><span class=\\"token punctuation\\">{</span>\\n        console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"request info:\\"</span><span class=\\"token punctuation\\">,</span>req<span class=\\"token punctuation\\">.</span>originalUrl<span class=\\"token punctuation\\">,</span>req<span class=\\"token punctuation\\">.</span>session<span class=\\"token punctuation\\">.</span>loginStatus<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">if</span><span class=\\"token punctuation\\">(</span>req<span class=\\"token punctuation\\">.</span>session<span class=\\"token punctuation\\">.</span>loginStatus <span class=\\"token operator\\">===</span> <span class=\\"token string\\">\\"success\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            res<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token literal-property property\\">code</span><span class=\\"token operator\\">:</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span>\\n                <span class=\\"token literal-property property\\">info</span><span class=\\"token operator\\">:</span><span class=\\"token string\\">\\"error session!\\"</span><span class=\\"token punctuation\\">,</span>\\n            <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{n as data};
